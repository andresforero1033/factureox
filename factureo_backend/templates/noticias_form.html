{% extends 'base.html' %}
{% block title %}{% if mode == 'edit' %}Editar noticia{% else %}Nueva noticia{% endif %} - Noticias{% endblock %}
{% block content %}
<div class="container">
    <h2 class="mb-3">{% if mode == 'edit' %}Editar noticia{% else %}Nueva noticia{% endif %}</h2>
    <form method="POST">
        <div class="row g-3">
            <div class="col-12">
                <label for="title" class="form-label">Título</label>
                <input type="text" class="form-control" id="title" name="title" required
                    value="{{ (data.title or '') if data else '' }}">
            </div>
            <div class="col-12">
                <label for="image_url" class="form-label">URL de imagen (opcional)</label>
                <input type="url" class="form-control" id="image_url" name="image_url"
                    placeholder="https://..."
                    value="{{ (data.image_url or '') if data else '' }}">
                <div class="form-text">Se mostrará como portada en las tarjetas del index y, opcionalmente, en el detalle.</div>
            </div>
            <div class="col-12">
                <label for="summary" class="form-label">Resumen (opcional)</label>
                <input type="text" class="form-control" id="summary" name="summary" maxlength="260"
                    value="{{ (data.summary or '') if data else '' }}">
                <div class="form-text">Si se deja vacío, se generará automáticamente a partir del contenido.</div>
            </div>
            <div class="col-12">
                <label for="content" class="form-label">Contenido</label>
                <textarea class="form-control" id="content" name="content" rows="10"
                    required>{{ (data.content or '') if data else '' }}</textarea>
            </div>
            <div class="col-12 form-check">
                <input class="form-check-input" type="checkbox" id="published" name="published" {% if data and
                    data.published %}checked{% endif %}>
                <label class="form-check-label" for="published">Publicado</label>
            </div>
        </div>
        <div class="mt-3 d-flex gap-2">
            <button type="submit" class="btn btn-primary">Guardar</button>
            {% if mode == 'edit' and item %}
            <a class="btn btn-outline-secondary" href="{{ url_for('news.detail_news', id=item.id) }}">Cancelar</a>
            {% else %}
            <a class="btn btn-outline-secondary" href="{{ url_for('news.list_news') }}">Cancelar</a>
            {% endif %}
        </div>
    </form>
</div>
{% endblock %}