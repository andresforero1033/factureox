{% extends 'base.html' %}
{% block title %}{{ item.title }} - Noticias{% endblock %}
{% block content %}
<div class="container" data-reveal="fade-up">
    <article class="mx-auto">
        <header class="mb-3">
            <h2 class="mb-1">{{ item.title }}</h2>
            <div class="text-muted small">
                {{ item.author or 'Equipo Factureo' }} • {{ item.created_at.strftime('%d %b %Y') if item.created_at }}
            </div>
        </header>
        {% if item.image_url %}
        <div class="ratio ratio-16x9 mb-3">
            <img src="{{ item.image_url }}" alt="Imagen de {{ item.title }}" class="img-fluid rounded" loading="lazy">
        </div>
        {% endif %}
        <div class="card">
            <div class="card-body">
                <p class="lead text-muted">{{ item.summary }}</p>
                <hr>
                <div class="content">
                    {{ item.content | safe }}
                </div>
            </div>
        </div>
        {% if current_user.is_authenticated and current_user.role in ['admin','owner'] %}
        <div class="d-flex gap-2 mt-3">
            <a class="btn btn-outline-secondary" href="{{ url_for('news.edit_news', id=item.id) }}">Editar</a>
            <form method="POST" action="{{ url_for('news.delete_news', id=item.id) }}"
                onsubmit="return confirm('¿Eliminar noticia?');">
                <button class="btn btn-outline-danger" type="submit">Eliminar</button>
            </form>
        </div>
        {% endif %}
        <div class="mt-4">
            <a href="{{ url_for('news.list_news') }}" class="btn btn-link"><i class="bi bi-arrow-left"></i> Volver a
                Noticias</a>
        </div>
    </article>
</div>
{% endblock %}