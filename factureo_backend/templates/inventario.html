{% extends 'base.html' %}
{% block title %}Inventario - Factureo{% endblock %}
{% block content %}
<h3>Inventario</h3>
<form class="row g-2 mb-3" method="POST" action="{{ url_for('inventario.create_product') }}">
    <div class="col-md-3"><input class="form-control" name="nombre" placeholder="Nombre" title="Nombre del producto"
            required></div>
    <div class="col-md-2"><input type="number" class="form-control" name="cantidad" placeholder="Cantidad"
            title="Cantidad" min="0" required></div>
    <div class="col-md-2"><input type="number" step="0.01" class="form-control" name="precio" placeholder="Precio"
            title="Precio" min="0" required></div>
    <div class="col-md-3"><input class="form-control" name="categoria" placeholder="Categoría" title="Categoría"></div>
    <div class="col-md-2 d-grid"><button type="submit" class="btn btn-success" title="Agregar producto"><i
                class="bi bi-plus-circle"></i> Agregar</button></div>
</form>

<table class="table table-striped align-middle">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Cantidad</th>
            <th>Precio</th>
            <th>Categoría</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        {% for p in productos %}
        <tr>
            <form method="POST" action="{{ url_for('inventario.edit_product', id=p._id) }}" class="row g-2">
                <td><input class="form-control" name="nombre" value="{{ p.nombre }}" placeholder="Nombre" title="Nombre"
                        required></td>
                <td><input type="number" class="form-control" name="cantidad" value="{{ p.cantidad }}"
                        placeholder="Cantidad" title="Cantidad" min="0" required></td>
                <td><input type="number" step="0.01" class="form-control" name="precio" value="{{ p.precio }}"
                        placeholder="Precio" title="Precio" min="0" required></td>
                <td><input class="form-control" name="categoria" value="{{ p.categoria }}" placeholder="Categoría"
                        title="Categoría"></td>
                <td class="text-nowrap">
                    <button type="submit" class="btn btn-primary btn-sm" title="Guardar cambios"><i
                            class="bi bi-save"></i> Guardar</button>
                </td>
            </form>
            <td class="text-nowrap">
                <form method="POST" action="{{ url_for('inventario.delete_product', id=p._id) }}">
                    <button type="submit" class="btn btn-outline-danger btn-sm" title="Eliminar producto"><i
                            class="bi bi-trash"></i> Eliminar</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}